<div class="main-container">
  @if (isLoading){
  <app-loader></app-loader>
  }

  <h1 class="title">Medals per Country</h1>

  <div class="counters-section">
    <div class="counter-container">
      <h2>Number of JOs</h2>
      <span class="counter">{{ nbJOs }}</span>
    </div>
    <div class="counter-container">
      <h2>Number of countries</h2>
      <span class="counter">{{ nbCountries }}</span>
    </div>
  </div>

  @if (diagramData){
  <div #containerRef class="diagramContainer">
    <ngx-charts-pie-chart
      [view]="[containerRef.offsetWidth, containerRef.offsetHeight]"
      scheme="cool"
      [results]="diagramData"
      [legend]="false"
      [labels]="true"
      [tooltipDisabled]="false"
      (select)="onCountryClick($event)"
    >
      <ng-template #tooltipTemplate let-model="model">
        <div class="tooltip">
          <span class="tooltip-country">{{ model.name }}</span>
          <div class="value-container">
            <mat-icon
              class="medal-icon"
              aria-hidden="false"
              aria-label="Medal icon"
              fontIcon="workspace_premium"
            ></mat-icon>
            <span class="value">{{ model.value }}</span>
          </div>
        </div>
      </ng-template>
    </ngx-charts-pie-chart>
  </div>
  }
</div>
